{
  "ampcode": "v1",
  "waves": [
    { "id": "P26-OS-CLOUD-D1-DX", "parallel": false, "tasks": ["D2601", "D2602", "D2603"] }
  ],
  "branch": "mkolbol-oscloud-d1-mkctl-and-docs",
  "tasks": [
    {
      "id": "D2601",
      "agent": "devex",
      "title": "mkctl endpoints list/watch: show TTL, live/probed routes",
      "why": "Give operators/agents a clear view of the OS‑Cloud: endpoints, TTL remaining, and probe status.",
      "allowedFiles": ["scripts/mkctl.ts", "docs/devex/mkctl-cookbook.md"],
      "verify": ["npm run build", "npm run validate:sprint"],
      "deliverables": ["patches/DIFF_D2601_mkctl-endpoints-watch.patch"]
    },
    {
      "id": "D2602",
      "agent": "devex",
      "title": "Docs: OS‑Cloud in Docker (Node + Go beachheads) with compose",
      "why": "Make the OS‑Cloud story obvious and runnable in minutes for new users and agents.",
      "allowedFiles": [
        "docs/devex/network-quickstart.md",
        "examples/docker/beachhead/docker-compose.yml",
        "examples/docker/beachhead/README.md"
      ],
      "verify": ["npm run build", "npm run validate:sprint"],
      "deliverables": ["patches/DIFF_D2602_docs-oscloud-docker.patch"]
    },
    {
      "id": "D2603",
      "agent": "devex",
      "title": "mkctl probe <coord> (manual test) + doc snippets",
      "why": "Enable quick manual verification of new endpoints and help author scripts.",
      "allowedFiles": ["scripts/mkctl.ts", "docs/devex/network-quickstart.md"],
      "verify": ["npm run build", "npm run validate:sprint"],
      "deliverables": ["patches/DIFF_D2603_mkctl-probe.patch"]
    }
  ],
  "branch_instructions": [
    "IMPORTANT: Work only on mkolbol-oscloud-d1-mkctl-and-docs.",
    "Logs: write JSON Lines to devex.log (devex schema).",
    "Modify only allowedFiles; keep changes minimal."
  ],
  "instructions": {
    "overview": "mkctl endpoints list/watch + probe; OS‑Cloud in Docker docs and compose for quick demo.",
    "expectations": [
      "Write JSONL log entries using the devex log schema.",
      "Keep changes minimal and under allowedFiles.",
      "Run verify commands and include deliverable patches."
    ],
    "briefing": "Add mkctl endpoints list/watch (TTL, live/probed), mkctl probe <coord>, and docs with docker-compose demo (Node + Go beachheads).",
    "logging": {
      "log_file": "devex.log",
      "schema": "agent_template/log_templates/devex_sprint_log.schema.json",
      "example": "agent_template/log_templates/devex_sprint_log.example.jsonl"
    },
    "hooks": {
      "eslint_dryrun": {
        "summary": "Fail‑fast ESLint fix dry‑run runs first; override with SKIP_ESLINT_DRYRUN=1 to bypass once.",
        "example": "agent_template/examples/precommit-eslint-dryrun.md"
      }
    },
    "parallelization": {
      "policy": "prefer_parallel",
      "rationale": "mkctl endpoints/watch (D2601) and docs/compose (D2602) can advance concurrently; mkctl probe (D2603) can be implemented in parallel once the command skeleton is in place.",
      "candidates": ["D2601", "D2602", "D2603"],
      "constraints": ["Avoid overlapping edits in mkctl.ts; sequence small PRs if needed"],
      "max_concurrency": 3
    },
    "deliverables_global": ["patches/*.patch", "tests updated and passing", "docs updated"]
  }
}
